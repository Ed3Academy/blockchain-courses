# 创建服务窗口合约

现在是时候开始搭建我们的网站了！

## 🌈 RainbowKit + wagmi + Next.js 模板

[RainbowKit](https://www.rainbowkit.com/docs/installation) 是一款钱包连接插件，官方推出的 RainbowKit + [wagmi](https://wagmi.sh/) + [Next.js](https://www.nextjs.cn/) 模板，可以帮助我们轻松地构建 DApp 应用。

你也可以直接使用我们为你准备的 [基础项目](https://github.com/Ed3Academy/miles-more-web) 直接开始后面的课程，这是最方便快捷的。

那我们赶快开始吧😃

首先在控制台执行安装命令：

```shell
npm init @rainbow-me/rainbowkit@latest
```

![install-rainbowkit-template.png](https://i.postimg.cc/R0jCbfT2/install-rainbowkit-template.png)

安装好之后，通过 VS Code 打开我们的项目，可以看到这样的目录结构：

![folder-structure.png](https://i.postimg.cc/c1XtkxqG/folder-structure.png)

这就是一个基本的 Next.js 项目，同时在 `_app.tsx` 还集成了 wagmi + RainbowKit。

这时候我们需要修改这个文件，添加 Polygon Mumbai 网络：

```tsx
import { arbitrum, goerli, mainnet, optimism, polygon, polygonMumbai } from 'wagmi/chains';

const { chains, provider, webSocketProvider } = configureChains(
  [
    mainnet,
    polygon,
    optimism,
    arbitrum,
    polygonMumbai,
    ...(process.env.NEXT_PUBLIC_ENABLE_TESTNETS === 'true' ? [goerli] : []),
  ],
  [publicProvider()]
);
```

接下来，为了避免 TypeScript 严格的类型检查，我们将 `index.tsx` 后缀改为 `.jsx`，同时移除大部分模板内容：

```jsx
import { ConnectButton } from '@rainbow-me/rainbowkit';
import Head from 'next/head';
import styles from '../styles/Home.module.css';

const Home = () => {
  return (
    <div className={styles.container}>
      <Head>
        <title>RainbowKit App</title>
        <meta
          content="Generated by @rainbow-me/create-rainbowkit"
          name="description"
        />
        <link href="/favicon.ico" rel="icon" />
      </Head>

      <main className={styles.main}>
        <ConnectButton />
      </main>
    </div>
  );
};

export default Home;
```

`styles\Home.module.css` 中无用的样式也移除掉：

```css
.container {
  padding: 0 2rem;
}

.main {
  min-height: 100vh;
  padding: 4rem 0;
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}
```

OK，赶紧执行 `npm run dev`，打开 `http://localhost:3000/` 看看页面效果吧：

![page-init-not-connect.png](https://i.postimg.cc/WzJGxh0b/page-init-not-connect.png)

## 👛 ConnectButton

可以看到页面上有一个连接钱包的按钮，这就是 RainbowKit 提供的 `ConnectButton` 组件，我们已经在 `index.jsx` 引入了：

```jsx
import { ConnectButton } from '@rainbow-me/rainbowkit';

...

<ConnectButton />
```

点击按钮即可完成与钱包的连接，然后切换至 Mumbai 网络：

![page-init.png](https://i.postimg.cc/wBXBvJds/page-init.png)

OK！完成第一个功能，连接钱包😉

## 💻 搭建 UI 界面

接着我们来搭建 UI 界面，你可以选择任意一个 UI 组件库，例如 [Material UI](https://mui.com/)、[Chakra UI](https://chakra-ui.com/) 甚至是 [Tailwind CSS](https://tailwindcss.com/)。

这里我们选择相对容易上手的 Ant Design，首先引入它：

```bash
npm install antd --save
```

然后修改 `index.jsx`：

```jsx
import { Card, Row, Col, Button, Typography } from "antd";

const { Title } = Typography;

const Home = () => {
  return (
      // ...
      <main className={styles.main}>
        <Title>Ed3 Miles&More 星享计划</Title>
        <ConnectButton />
        <Card style={{ width: 600, marginTop: 20 }}>
          <Row gutter={[20, 20]}>
            <Col span={24}>
              <Card title="机票价格">
                <p>0 MATIC</p>
              </Card>
            </Col>
            <Col span={12}>
              <Card title="已购机票">
                <p>0 张</p>
              </Card>
            </Col>
            <Col span={12}>
              <Card title="剩余机票">
                <p>0 张</p>
              </Card>
            </Col>
            <Col span={12}>
              <Card title="我的积分">
                <p>0</p>
              </Card>
            </Col>
            <Col span={12}>
              <Card title="我的优惠券">
                <p>0 张</p>
              </Card>
            </Col>
            <Col span={24}>
              <Button type="primary" block>
                购买机票
              </Button>
            </Col>
            <Col span={24}>
              <Button block>兑换优惠券</Button>
            </Col>
          </Row>
        </Card>
      </main>
      // ...
  );
};

export default Home;

```

我们引入了 Ant Design 的 `Title`、`Card`、`Button` 等组件，搭建了基本的 UI 界面：

![page-simple-ui.png](https://i.postimg.cc/KvQCyjXZ/page-simple-ui.png)
